import{w as X,a as Z,t as p,c as T,b as k,I as ee,p as L,n as I,m as x,L as te,u as ne,d as oe}from"./index-DrHpvEfA.js";import{o as ae,u as M,B as le,r as G,a as W,F as se,b as ie,c as re,p as ce,d as ue,P as de,e as fe,f as me,g as ge,h as he,i as Be}from"./user-D8TnV8Bk.js";import{d as be,n as N,e as ve,f as we,r as P,a as s,g as E,h as j,i as V,j as ye,k as z,F as _e,m as Y,l as Se,p as pe,q as H,s as Ce,t as xe,_ as Pe,c as Te,w as F,u as ke,o as Ee,v as Oe,b as Re}from"./index-BveHHVV9.js";import{u as $e}from"./users-6W6RWIzN.js";const Ae=(e,r)=>{const o=P(),a=()=>{o.value=we(e).height};return be(()=>{N(a);for(let c=1;c<=3;c++)setTimeout(a,100*c)}),ae(()=>N(a)),ve([X,Z],a),o};function Fe(e,r){const o=Ae(e);return a=>s("div",{class:r("placeholder"),style:{height:o.value?`${o.value}px`:void 0}},[a()])}const[J,U]=T("action-bar"),Q=Symbol(J),Ie={placeholder:Boolean,safeAreaInsetBottom:p};var Ve=E({name:J,props:Ie,setup(e,{slots:r}){const o=P(),a=Fe(o,U),{linkChildren:c}=j(Q);c();const g=()=>{var B;return s("div",{ref:o,class:[U(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(B=r.default)==null?void 0:B.call(r)])};return()=>e.placeholder?a(g):g()}});const De=k(Ve),[Ne,C]=T("button"),ze=V({},G,{tag:x("button"),text:String,icon:String,type:x("default"),size:x("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:x("button"),loadingSize:I,loadingText:String,loadingType:String,iconPosition:x("left")});var He=E({name:Ne,props:ze,emits:["click"],setup(e,{emit:r,slots:o}){const a=M(),c=()=>o.loading?o.loading():s(te,{size:e.loadingSize,type:e.loadingType,class:C("loading")},null),g=()=>{if(e.loading)return c();if(o.icon)return s("div",{class:C("icon")},[o.icon()]);if(e.icon)return s(ee,{name:e.icon,class:C("icon"),classPrefix:e.iconPrefix},null)},B=()=>{let i;if(e.loading?i=e.loadingText:i=o.default?o.default():e.text,i)return s("span",{class:C("text")},[i])},u=()=>{const{color:i,plain:b}=e;if(i){const h={color:b?i:"white"};return b||(h.background=i),i.includes("gradient")?h.border=0:h.borderColor=i,h}},m=i=>{e.loading?L(i):e.disabled||(r("click",i),a())};return()=>{const{tag:i,type:b,size:h,block:y,round:_,plain:v,square:O,loading:n,disabled:t,hairline:l,nativeType:d,iconPosition:f}=e,S=[C([b,h,{plain:v,block:y,round:_,square:O,loading:n,disabled:t,hairline:l}]),{[le]:l}];return s(i,{type:d,class:S,style:u(),disabled:t,onClick:m},{default:()=>[s("div",{class:C("content")},[f==="left"&&g(),B(),f==="right"&&g()])]})}}});const A=k(He),[Ue,qe]=T("action-bar-button"),Ke=V({},G,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Le=E({name:Ue,props:Ke,setup(e,{slots:r}){const o=M(),{parent:a,index:c}=ye(Q),g=z(()=>{if(a){const u=a.children[c.value-1];return!(u&&"isButton"in u)}}),B=z(()=>{if(a){const u=a.children[c.value+1];return!(u&&"isButton"in u)}});return W({isButton:!0}),()=>{const{type:u,icon:m,text:i,color:b,loading:h,disabled:y}=e;return s(A,{class:qe([u,{last:B.value,first:g.value}]),size:"large",type:u,icon:m,color:b,loading:h,disabled:y,onClick:o},{default:()=>[r.default?r.default():i]})}}});const q=k(Le),[Me,Ge]=T("form"),We={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:I,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:p,showErrorMessage:p,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var je=E({name:Me,props:We,emits:["submit","failed"],setup(e,{emit:r,slots:o}){const{children:a,linkChildren:c}=j(se),g=n=>n?a.filter(t=>n.includes(t.name)):a,B=n=>new Promise((t,l)=>{const d=[];g(n).reduce((S,R)=>S.then(()=>{if(!d.length)return R.validate().then(D=>{D&&d.push(D)})}),Promise.resolve()).then(()=>{d.length?l(d):t()})}),u=n=>new Promise((t,l)=>{const d=g(n);Promise.all(d.map(f=>f.validate())).then(f=>{f=f.filter(Boolean),f.length?l(f):t()})}),m=n=>{const t=a.find(l=>l.name===n);return t?new Promise((l,d)=>{t.validate().then(f=>{f?d(f):l()})}):Promise.reject()},i=n=>typeof n=="string"?m(n):e.validateFirst?B(n):u(n),b=n=>{typeof n=="string"&&(n=[n]),g(n).forEach(l=>{l.resetValidation()})},h=()=>a.reduce((n,t)=>(n[t.name]=t.getValidationStatus(),n),{}),y=(n,t)=>{a.some(l=>l.name===n?(l.$el.scrollIntoView(t),!0):!1)},_=()=>a.reduce((n,t)=>(t.name!==void 0&&(n[t.name]=t.formValue.value),n),{}),v=()=>{const n=_();i().then(()=>r("submit",n)).catch(t=>{r("failed",{values:n,errors:t});const{scrollToError:l,scrollToErrorPosition:d}=e;l&&t[0].name&&y(t[0].name,d?{block:d}:void 0)})},O=n=>{L(n),v()};return c({props:e}),W({submit:v,validate:i,getValues:_,scrollToField:y,resetValidation:b,getValidationStatus:h}),()=>{var n;return s("form",{class:Ge(),onSubmit:O},[(n=o.default)==null?void 0:n.call(o)])}}});const Ye=k(je),[Je,K]=T("cell-group"),Qe={title:String,inset:Boolean,border:p};var Xe=E({name:Je,inheritAttrs:!1,props:Qe,setup(e,{slots:r,attrs:o}){const a=()=>{var g;return s("div",Y({class:[K({inset:e.inset}),{[re]:e.border&&!e.inset}]},o,ie()),[(g=r.default)==null?void 0:g.call(r)])},c=()=>s("div",{class:K("title",{inset:e.inset})},[r.title?r.title():e.title]);return()=>e.title||r.title?s(_e,null,[c(),a()]):a()}});const Ze=k(Xe),[et,w,$]=T("dialog"),tt=V({},ce,{title:String,theme:String,width:I,message:[String,Function],callback:Function,allowHtml:Boolean,className:ne,transition:x("van-dialog-bounce"),messageAlign:String,closeOnPopstate:p,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:p,closeOnClickOverlay:Boolean,keyboardEnabled:p,destroyOnClose:Boolean}),nt=[...ue,"transition","closeOnPopstate","destroyOnClose"];var ot=E({name:et,props:tt,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:r,slots:o}){const a=P(),c=xe({confirm:!1,cancel:!1}),g=t=>r("update:show",t),B=t=>{var l;g(!1),(l=e.callback)==null||l.call(e,t)},u=t=>()=>{e.show&&(r(t),e.beforeClose?(c[t]=!0,ge(e.beforeClose,{args:[t],done(){B(t),c[t]=!1},canceled(){c[t]=!1}})):B(t))},m=u("cancel"),i=u("confirm"),b=Se(t=>{var l,d;if(!e.keyboardEnabled||t.target!==((d=(l=a.value)==null?void 0:l.popupRef)==null?void 0:d.value))return;({Enter:e.showConfirmButton?i:H,Escape:e.showCancelButton?m:H})[t.key](),r("keydown",t)},["enter","esc"]),h=()=>{const t=o.title?o.title():e.title;if(t)return s("div",{class:w("header",{isolated:!e.message&&!o.default})},[t])},y=t=>{const{message:l,allowHtml:d,messageAlign:f}=e,S=w("message",{"has-title":t,[f]:f}),R=Ce(l)?l():l;return d&&typeof R=="string"?s("div",{class:S,innerHTML:R},null):s("div",{class:S},[R])},_=()=>{if(o.default)return s("div",{class:w("content")},[o.default()]);const{title:t,message:l,allowHtml:d}=e;if(l){const f=!!(t||o.title);return s("div",{key:d?1:0,class:w("content",{isolated:!f})},[y(f)])}},v=()=>s("div",{class:[me,w("footer")]},[e.showCancelButton&&s(A,{size:"large",text:e.cancelButtonText||$("cancel"),class:w("cancel"),style:{color:e.cancelButtonColor},loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:m},null),e.showConfirmButton&&s(A,{size:"large",text:e.confirmButtonText||$("confirm"),class:[w("confirm"),{[fe]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:i},null)]),O=()=>s(De,{class:w("footer")},{default:()=>[e.showCancelButton&&s(q,{type:"warning",text:e.cancelButtonText||$("cancel"),class:w("cancel"),color:e.cancelButtonColor,loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:m},null),e.showConfirmButton&&s(q,{type:"danger",text:e.confirmButtonText||$("confirm"),class:w("confirm"),color:e.confirmButtonColor,loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:i},null)]}),n=()=>o.footer?o.footer():e.theme==="round-button"?O():v();return()=>{const{width:t,title:l,theme:d,message:f,className:S}=e;return s(de,Y({ref:a,role:"dialog",class:[w([d]),S],style:{width:oe(t)},tabindex:0,"aria-labelledby":l||f,onKeydown:b,"onUpdate:show":g},pe(e,nt)),{default:()=>[h(),_(),n()]})}}});const at=k(ot),lt={class:"loginWrapper"},st={style:{margin:"16px"}},it={__name:"index",setup(e){const r=P(""),o=P(""),a=P(!1),c=he(),g=ke(),B=u=>{console.log("submit",u);const m=$e.find(i=>i.name===u.username);u.username&&m&&u.password===m.date?(c.initImages(),sessionStorage.setItem("userName",u.username),sessionStorage.setItem("isLoggedIn",u.password),g.push({path:`/album/${u.username}`,replace:!0})):a.value=!0};return(u,m)=>{const i=Be,b=Ze,h=A,y=Ye,_=at;return Ee(),Te("div",lt,[s(y,{onSubmit:B},{default:F(()=>[s(b,{inset:""},{default:F(()=>[s(i,{modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=v=>r.value=v),name:"username",label:"用户名",placeholder:"请输入用户名",rules:[{required:!0,message:"请输入用户名"}]},null,8,["modelValue"]),s(i,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=v=>o.value=v),type:"password",name:"password",label:"密码",placeholder:"请输入密码",rules:[{required:!0,message:"请输入密码"}]},null,8,["modelValue"])]),_:1}),Oe("div",st,[s(h,{round:"",block:"",type:"primary","native-type":"submit"},{default:F(()=>[...m[3]||(m[3]=[Re(" 提交 ",-1)])]),_:1})])]),_:1}),s(_,{show:a.value,"onUpdate:show":m[2]||(m[2]=v=>a.value=v),title:"温馨提示",message:"用户名或密码错误，请稍后再试。"},null,8,["show"])])}}},ft=Pe(it,[["__scopeId","data-v-f08a3251"]]);export{ft as default};
