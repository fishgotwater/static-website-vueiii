import{$ as Ce,q as Ue,M as Xe,e as G,i as q,T as ne,r as S,H as Ge,E as Oe,G as Ze,a0 as Je,g as ae,z as ce,a as u,a1 as ke,a2 as xe,x as P,O as we,P as Te,m as X,n as H,d as Pe,K as Qe,F as pe,k as D,N as Ee,a3 as et,s as tt,j as nt,t as at,a4 as ve,b as ot,a5 as lt,a6 as it}from"./index-BveHHVV9.js";import{t as z,u as F,n as R,p as U,j as rt,c as oe,b as le,m as L,I as K,v as st,o as ct,k as ut,x as dt,e as ft,d as ge,y as vt}from"./index-DrHpvEfA.js";const Z="van-hairline",Zt=`${Z}--top`,Jt=`${Z}--left`,Qt=`${Z}--surround`,pt=`${Z}--top-bottom`,en=`${Z}-unset--top-bottom`,gt="van-haptics-feedback",mt=Symbol("van-form"),tn=500,me=5;function ht(e,{args:n=[],done:a,canceled:i,error:o}){if(e){const l=e.apply(null,n);Ce(l)?l.then(g=>{g?a():i&&i()}).catch(o||Ue):l?a():i&&i()}else a()}const Re=Symbol();function nn(e){const n=Xe(Re,null);n&&G(n,a=>{a&&e()})}function _e(e){const n=ne();n&&q(n.proxy,e)}const bt={to:[String,Object],url:String,replace:Boolean};function yt({to:e,url:n,replace:a,$router:i}){e&&i?i[a?"replace":"push"](e):n&&(a?location.replace(n):location.href=n)}function St(){const e=ne().proxy;return()=>yt(e)}let It=2e3;const Ct=()=>++It,Be={show:Boolean,zIndex:R,overlay:z,duration:R,teleport:[String,Object],lockScroll:z,lazyRender:z,beforeClose:Function,overlayProps:Object,overlayStyle:Object,overlayClass:F,transitionAppear:Boolean,closeOnClickOverlay:z},an=Object.keys(Be);function Ot(e,n){return e>n?"horizontal":n>e?"vertical":""}function kt(){const e=S(0),n=S(0),a=S(0),i=S(0),o=S(0),l=S(0),g=S(""),f=S(!0),c=()=>g.value==="vertical",h=()=>g.value==="horizontal",d=()=>{a.value=0,i.value=0,o.value=0,l.value=0,g.value="",f.value=!0};return{move:(I=>{const O=I.touches[0];a.value=(O.clientX<0?0:O.clientX)-e.value,i.value=O.clientY-n.value,o.value=Math.abs(a.value),l.value=Math.abs(i.value);const b=10;(!g.value||o.value<b&&l.value<b)&&(g.value=Ot(o.value,l.value)),f.value&&(o.value>me||l.value>me)&&(f.value=!1)}),start:(I=>{d(),e.value=I.touches[0].clientX,n.value=I.touches[0].clientY}),reset:d,startX:e,startY:n,deltaX:a,deltaY:i,offsetX:o,offsetY:l,direction:g,isVertical:c,isHorizontal:h,isTap:f}}let Y=0;const he="van-overflow-hidden";function xt(e,n){const a=kt(),i="01",o="10",l=d=>{a.move(d);const x=a.deltaY.value>0?o:i,_=Je(d.target,e.value),{scrollHeight:I,offsetHeight:O,scrollTop:b}=_;let C="11";b===0?C=O>=I?"00":"01":b+O>=I&&(C="10"),C!=="11"&&a.isVertical()&&!(parseInt(C,2)&parseInt(x,2))&&U(d,!0)},g=()=>{document.addEventListener("touchstart",a.start),document.addEventListener("touchmove",l,{passive:!1}),Y||document.body.classList.add(he),Y++},f=()=>{Y&&(document.removeEventListener("touchstart",a.start),document.removeEventListener("touchmove",l),Y--,Y||document.body.classList.remove(he))},c=()=>n()&&g(),h=()=>n()&&f();Ge(c),Oe(h),Ze(h),G(n,d=>{d?g():f()})}function Le(e){const n=S(!1);return G(e,a=>{a&&(n.value=a)},{immediate:!0}),a=>()=>n.value?a():null}const be=()=>{var e;const{scopeId:n}=((e=ne())==null?void 0:e.vnode)||{};return n?{[n]:""}:null},[wt,Tt]=oe("overlay"),Pt={show:Boolean,zIndex:R,duration:R,className:F,lockScroll:z,lazyRender:z,customStyle:Object,teleport:[String,Object]};var Et=ae({name:wt,inheritAttrs:!1,props:Pt,setup(e,{attrs:n,slots:a}){const i=S(),o=Le(()=>e.show||!e.lazyRender),l=f=>{e.lockScroll&&U(f,!0)},g=o(()=>{var f;const c=q(rt(e.zIndex),e.customStyle);return P(e.duration)&&(c.animationDuration=`${e.duration}s`),we(u("div",X({ref:i,style:c,class:[Tt(),e.className]},n),[(f=a.default)==null?void 0:f.call(a)]),[[Te,e.show]])});return ce("touchmove",l,{target:i}),()=>{const f=u(ke,{name:"van-fade",appear:!0},{default:g});return e.teleport?u(xe,{to:e.teleport},{default:()=>[f]}):f}}});const Rt=le(Et),_t=q({},Be,{round:Boolean,position:L("center"),closeIcon:L("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:L("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Bt,ye]=oe("popup");var Lt=ae({name:Bt,inheritAttrs:!1,props:_t,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:n,attrs:a,slots:i}){let o,l;const g=S(),f=S(),c=Le(()=>e.show||!e.lazyRender),h=D(()=>{const v={zIndex:g.value};if(P(e.duration)){const w=e.position==="center"?"animationDuration":"transitionDuration";v[w]=`${e.duration}s`}return v}),d=()=>{o||(o=!0,g.value=e.zIndex!==void 0?+e.zIndex:Ct(),n("open"))},x=()=>{o&&ht(e.beforeClose,{done(){o=!1,n("close"),n("update:show",!1)}})},_=v=>{n("clickOverlay",v),e.closeOnClickOverlay&&x()},I=()=>{if(e.overlay){const v=q({show:e.show,class:e.overlayClass,zIndex:g.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},e.overlayProps);return u(Rt,X(v,be(),{onClick:_}),{default:i["overlay-content"]})}},O=v=>{n("clickCloseIcon",v),x()},b=()=>{if(e.closeable)return u(K,{role:"button",tabindex:0,name:e.closeIcon,class:[ye("close-icon",e.closeIconPosition),gt],classPrefix:e.iconPrefix,onClick:O},null)};let C;const A=()=>{C&&clearTimeout(C),C=setTimeout(()=>{n("opened")})},W=()=>n("closed"),ie=v=>n("keydown",v),$=c(()=>{var v;const{destroyOnClose:w,round:B,position:N,safeAreaInsetTop:re,safeAreaInsetBottom:Q,show:p}=e;if(!(!p&&w))return we(u("div",X({ref:f,style:h.value,role:"dialog",tabindex:0,class:[ye({round:B,[N]:N}),{"van-safe-area-top":re,"van-safe-area-bottom":Q}],onKeydown:ie},a,be()),[(v=i.default)==null?void 0:v.call(i),b()]),[[Te,p]])}),J=()=>{const{position:v,transition:w,transitionAppear:B}=e,N=v==="center"?"van-fade":`van-popup-slide-${v}`;return u(ke,{name:w||N,appear:B,onAfterEnter:A,onAfterLeave:W},{default:$})};return G(()=>e.show,v=>{v&&!o&&(d(),a.tabindex===0&&H(()=>{var w;(w=f.value)==null||w.focus()})),!v&&o&&(o=!1,n("close"))}),_e({popupRef:f}),xt(f,()=>e.show&&e.lockScroll),ce("popstate",()=>{e.closeOnPopstate&&(x(),l=!1)}),Pe(()=>{e.show&&d()}),Qe(()=>{l&&(n("update:show",!0),l=!1)}),Oe(()=>{e.show&&e.teleport&&(x(),l=!0)}),Ee(Re,()=>e.show),()=>e.teleport?u(xe,{to:e.teleport},{default:()=>[I(),J()]}):u(pe,null,[I(),J()])}});const on=le(Lt);let At=0;function Vt(){const e=ne(),{name:n="unknown"}=e?.type||{};return`${n}-${++At}`}const[Mt,j]=oe("cell"),Ae={tag:L("div"),icon:String,size:String,title:R,value:R,label:R,center:Boolean,isLink:Boolean,border:z,iconPrefix:String,valueClass:F,labelClass:F,titleClass:F,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},Dt=q({},Ae,bt);var zt=ae({name:Mt,props:Dt,setup(e,{slots:n}){const a=St(),i=()=>{if(n.label||P(e.label))return u("div",{class:[j("label"),e.labelClass]},[n.label?n.label():e.label])},o=()=>{var c;if(n.title||P(e.title)){const h=(c=n.title)==null?void 0:c.call(n);return Array.isArray(h)&&h.length===0?void 0:u("div",{class:[j("title"),e.titleClass],style:e.titleStyle},[h||u("span",null,[e.title]),i()])}},l=()=>{const c=n.value||n.default;if(c||P(e.value))return u("div",{class:[j("value"),e.valueClass]},[c?c():u("span",null,[e.value])])},g=()=>{if(n.icon)return n.icon();if(e.icon)return u(K,{name:e.icon,class:j("left-icon"),classPrefix:e.iconPrefix},null)},f=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const c=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return u(K,{name:c,class:j("right-icon")},null)}};return()=>{var c;const{tag:h,size:d,center:x,border:_,isLink:I,required:O}=e,b=(c=e.clickable)!=null?c:I,C={center:x,required:!!O,clickable:b,borderless:!_};return d&&(C[d]=!!d),u(h,{class:j(C),role:b?"button":void 0,tabindex:b?0:void 0,onClick:a},{default:()=>{var A;return[g(),o(),l(),f(),(A=n.extra)==null?void 0:A.call(n)]}})}}});const $t=le(zt);function Ve(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function Nt(e,n){if(Ve(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function jt(e,n){return new Promise(a=>{const i=n.validator(e,n);if(Ce(i)){i.then(a);return}a(i)})}function Se(e,n){const{message:a}=n;return tt(a)?a(e,n):a||""}function Ft({target:e}){e.composing=!0}function Ie({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Kt(e,n){const a=st();e.style.height="auto";let i=e.scrollHeight;if(et(n)){const{maxHeight:o,minHeight:l}=n;o!==void 0&&(i=Math.min(i,o)),l!==void 0&&(i=Math.max(i,l))}i&&(e.style.height=`${i}px`,ct(a))}function qt(e,n){return e==="number"&&(e="text",n??(n="decimal")),e==="digit"&&(e="tel",n??(n="numeric")),{type:e,inputmode:n}}function te(e){return[...e].length}function se(e,n){return[...e].slice(0,n).join("")}const[Wt,k]=oe("field"),Yt={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:R,max:Number,min:Number,formatter:Function,clearIcon:L("clear"),modelValue:ut(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:L("focus"),formatTrigger:L("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},Ht=q({},Ae,Yt,{rows:R,type:L("text"),rules:Array,autosize:[Boolean,Object],labelWidth:R,labelClass:F,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Ut=ae({name:Wt,props:Ht,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a}){const i=Vt(),o=at({status:"unvalidated",focused:!1,validateMessage:""}),l=S(),g=S(),f=S(),{parent:c}=nt(mt),h=()=>{var t;return String((t=e.modelValue)!=null?t:"")},d=t=>{if(P(e[t]))return e[t];if(c&&P(c.props[t]))return c.props[t]},x=D(()=>{const t=d("readonly");if(e.clearable&&!t){const r=h()!=="",s=e.clearTrigger==="always"||e.clearTrigger==="focus"&&o.focused;return r&&s}return!1}),_=D(()=>f.value&&a.input?f.value():e.modelValue),I=D(()=>{var t;const r=d("required");return r==="auto"?(t=e.rules)==null?void 0:t.some(s=>s.required):r}),O=t=>t.reduce((r,s)=>r.then(()=>{if(o.status==="failed")return;let{value:m}=_;if(s.formatter&&(m=s.formatter(m,s)),!Nt(m,s)){o.status="failed",o.validateMessage=Se(m,s);return}if(s.validator)return Ve(m)&&s.validateEmpty===!1?void 0:jt(m,s).then(y=>{y&&typeof y=="string"?(o.status="failed",o.validateMessage=y):y===!1&&(o.status="failed",o.validateMessage=Se(m,s))})}),Promise.resolve()),b=()=>{o.status="unvalidated",o.validateMessage=""},C=()=>n("endValidate",{status:o.status,message:o.validateMessage}),A=(t=e.rules)=>new Promise(r=>{b(),t?(n("startValidate"),O(t).then(()=>{o.status==="failed"?(r({name:e.name,message:o.validateMessage}),C()):(o.status="passed",r(),C())})):r()}),W=t=>{if(c&&e.rules){const{validateTrigger:r}=c.props,s=ve(r).includes(t),m=e.rules.filter(y=>y.trigger?ve(y.trigger).includes(t):s);m.length&&A(m)}},ie=t=>{var r;const{maxlength:s}=e;if(P(s)&&te(t)>+s){const m=h();if(m&&te(m)===+s)return m;const y=(r=l.value)==null?void 0:r.selectionEnd;if(o.focused&&y){const V=[...t],M=V.length-+s;return V.splice(y-M,M),V.join("")}return se(t,+s)}return t},$=(t,r="onChange")=>{var s,m;const y=t;t=ie(t);const V=y.length-t.length;if(e.type==="number"||e.type==="digit"){const E=e.type==="number";if(t=dt(t,E,E),r==="onBlur"&&t!==""&&(e.min!==void 0||e.max!==void 0)){const T=ft(+t,(s=e.min)!=null?s:-1/0,(m=e.max)!=null?m:1/0);+t!==T&&(t=T.toString())}}let M=0;if(e.formatter&&r===e.formatTrigger){const{formatter:E,maxlength:T}=e;if(t=E(t),P(T)&&te(t)>+T&&(t=se(t,+T)),l.value&&o.focused){const{selectionEnd:ee}=l.value,fe=se(y,ee);M=E(fe).length-fe.length}}if(l.value&&l.value.value!==t)if(o.focused){let{selectionStart:E,selectionEnd:T}=l.value;if(l.value.value=t,P(E)&&P(T)){const ee=t.length;V?(E-=V,T-=V):M&&(E+=M,T+=M),l.value.setSelectionRange(Math.min(E,ee),Math.min(T,ee))}}else l.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},J=t=>{t.target.composing||$(t.target.value)},v=()=>{var t;return(t=l.value)==null?void 0:t.blur()},w=()=>{var t;return(t=l.value)==null?void 0:t.focus()},B=()=>{const t=l.value;e.type==="textarea"&&e.autosize&&t&&Kt(t,e.autosize)},N=t=>{o.focused=!0,n("focus",t),H(B),d("readonly")&&v()},re=t=>{o.focused=!1,$(h(),"onBlur"),n("blur",t),!d("readonly")&&(W("onBlur"),H(B),vt())},Q=t=>n("clickInput",t),p=t=>n("clickLeftIcon",t),Me=t=>n("clickRightIcon",t),De=t=>{U(t),n("update:modelValue",""),n("clear",t)},ue=D(()=>{if(typeof e.error=="boolean")return e.error;if(c&&c.props.showError&&o.status==="failed")return!0}),ze=D(()=>{const t=d("labelWidth"),r=d("labelAlign");if(t&&r!=="top")return{width:ge(t)}}),$e=t=>{t.keyCode===13&&(!(c&&c.props.submitOnEnter)&&e.type!=="textarea"&&U(t),e.type==="search"&&v()),n("keypress",t)},de=()=>e.id||`${i}-input`,Ne=()=>o.status,je=()=>{const t=k("control",[d("inputAlign"),{error:ue.value,custom:!!a.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(a.input)return u("div",{class:t,onClick:Q},[a.input()]);const r={id:de(),ref:l,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:d("disabled"),readonly:d("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${i}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:re,onFocus:N,onInput:J,onClick:Q,onChange:Ie,onKeypress:$e,onCompositionend:Ie,onCompositionstart:Ft};return e.type==="textarea"?u("textarea",X(r,{inputmode:e.inputmode}),null):u("input",X(qt(e.type,e.inputmode),r),null)},Fe=()=>{const t=a["left-icon"];if(e.leftIcon||t)return u("div",{class:k("left-icon"),onClick:p},[t?t():u(K,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Ke=()=>{const t=a["right-icon"];if(e.rightIcon||t)return u("div",{class:k("right-icon"),onClick:Me},[t?t():u(K,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},qe=()=>{if(e.showWordLimit&&e.maxlength){const t=te(h());return u("div",{class:k("word-limit")},[u("span",{class:k("word-num")},[t]),ot("/"),e.maxlength])}},We=()=>{if(c&&c.props.showErrorMessage===!1)return;const t=e.errorMessage||o.validateMessage;if(t){const r=a["error-message"],s=d("errorMessageAlign");return u("div",{class:k("error-message",s)},[r?r({message:t}):t])}},Ye=()=>{const t=d("labelWidth"),r=d("labelAlign"),s=d("colon")?":":"";if(a.label)return[a.label(),s];if(e.label)return u("label",{id:`${i}-label`,for:a.input?void 0:de(),"data-allow-mismatch":"attribute",onClick:m=>{U(m),w()},style:r==="top"&&t?{width:ge(t)}:void 0},[e.label+s])},He=()=>[u("div",{class:k("body")},[je(),x.value&&u(K,{ref:g,name:e.clearIcon,class:k("clear")},null),Ke(),a.button&&u("div",{class:k("button")},[a.button()])]),qe(),We()];return _e({blur:v,focus:w,validate:A,formValue:_,resetValidation:b,getValidationStatus:Ne}),Ee(lt,{customValue:f,resetValidation:b,validateWithTrigger:W}),G(()=>e.modelValue,()=>{$(h()),b(),W("onChange"),H(B)}),Pe(()=>{$(h(),e.formatTrigger),H(B)}),ce("touchstart",De,{target:D(()=>{var t;return(t=g.value)==null?void 0:t.$el})}),()=>{const t=d("disabled"),r=d("labelAlign"),s=Fe(),m=()=>{const y=Ye();return r==="top"?[s,y].filter(Boolean):y||[]};return u($t,{size:e.size,class:k({error:ue.value,disabled:t,[`label-${r}`]:r}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:ze.value,valueClass:k("value"),titleClass:[k("label",[r,{required:I.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:s&&r!=="top"?()=>s:null,title:m,value:He,extra:a.extra})}}});const ln=le(Ut),rn=it("user",{state:()=>({images:[],count:0}),getters:{doubleCount(e){return e.count*2}},actions:{increment(){this.count++},initImages(){this.images=Object.assign({}),console.log("store.images: ",this.images)}}});export{Qt as B,mt as F,gt as H,tn as L,on as P,_e as a,be as b,pt as c,an as d,Jt as e,Zt as f,ht as g,rn as h,ln as i,kt as j,Vt as k,yt as l,en as m,nn as o,Be as p,bt as r,St as u};
